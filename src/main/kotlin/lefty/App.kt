/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package lefty

import lefty.builtin.git.GIT_PLUGIN
import lefty.dagger.DaggerApplicationComponent
import lefty.pipeline.Specification
import lefty.pipeline.dagger.PipelineComponent
import lefty.pipeline.dagger.PipelineModule
import java.nio.file.Paths
import javax.inject.Inject
import javax.inject.Provider

class App @Inject constructor(
        private val pipelineBuilder: Provider<PipelineComponent.Builder>
) {
    fun run() {
        val pipeline = pipelineBuilder
                .get()
                .pipelineModule(
                        PipelineModule(
                                Paths.get("./test"),
                                Specification(
                                        listOf(
                                                GIT_PLUGIN
                                        )
                                )
                        )
                )
                .build()
                .pipeline()
        pipeline.run()
    }
}

fun main(args: Array<String>) {
    val applicationComponent = DaggerApplicationComponent
            .builder()
            .build()

    val app = applicationComponent.app()
    app.run()
}
